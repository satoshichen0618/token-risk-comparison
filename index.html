<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šå¹³å°é£é™©å¯¹æ¯”å·¥å…· - Token Risk Comparison</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ” å¤–éƒ¨å¤šå¹³å°é£é™©å¯¹æ¯”å·¥å…·</h1>
            <p class="subtitle">è‡ªåŠ¨å¯¹æ¯”ä¸»æµé“¾ä¸Šå®‰å…¨å¹³å°çš„é£é™©æ ‡ç­¾ä¸è¯„åˆ†</p>
            <a href="å¿«é€Ÿå¼€å§‹.html" target="_blank" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: rgba(99, 102, 241, 0.2); border: 1px solid var(--primary-color); border-radius: 8px; color: var(--primary-color); text-decoration: none; font-size: 0.9rem; transition: all 0.3s ease;">
                ğŸ“– ä½¿ç”¨æ•™ç¨‹
            </a>
        </header>

        <!-- è¾“å…¥åŒº -->
        <section class="input-section">
            <div class="input-group">
                <label for="contractAddress">åˆçº¦åœ°å€</label>
                <input 
                    type="text" 
                    id="contractAddress" 
                    placeholder="0x..." 
                    autocomplete="off"
                >
            </div>
            <div class="input-group">
                <label for="chainSelect">é“¾</label>
                <select id="chainSelect">
                    <option value="ETH">Ethereum (ETH)</option>
                    <option value="BSC">Binance Smart Chain (BSC)</option>
                    <option value="SOL">Solana (SOL)</option>
                    <option value="BASE">Base</option>
                    <option value="XLayer">XLayer</option>
                    <option value="ARB">Arbitrum</option>
                    <option value="OP">Optimism</option>
                    <option value="POLYGON">Polygon</option>
                </select>
            </div>
            <button id="searchBtn" class="search-btn">
                <span class="btn-text">å¼€å§‹åˆ†æ</span>
                <span class="btn-loader" style="display: none;">åˆ†æä¸­...</span>
            </button>
        </section>

        <!-- æ±‡æ€»é£é™©æ‘˜è¦ -->
        <section id="summarySection" class="summary-section" style="display: none;">
            <h2>é£é™©æ±‡æ€»</h2>
            <div class="summary-card">
                <div class="summary-header">
                    <span class="risk-badge" id="summaryRiskBadge">-</span>
                    <div class="summary-info">
                        <h3 id="summaryTitle">ç»¼åˆé£é™©è¯„ä¼°</h3>
                        <p id="summaryDescription">æ­£åœ¨åˆ†æ...</p>
                    </div>
                </div>
                <div class="confidence-meter">
                    <label>å¯ä¿¡åº¦</label>
                    <div class="meter-bar">
                        <div class="meter-fill" id="confidenceMeter"></div>
                    </div>
                    <span class="confidence-value" id="confidenceValue">-</span>
                </div>
            </div>
        </section>

        <!-- å¹³å°ç»“æœå¡ç‰‡ -->
        <section id="resultsSection" class="results-section" style="display: none;">
            <h2>å¹³å°å¯¹æ¯”ç»“æœ</h2>
            <div class="platforms-grid">
                <!-- GMGN å¡ç‰‡ -->
                <div class="platform-card" id="gmgnCard">
                    <div class="platform-header">
                        <h3>GMGN</h3>
                        <span class="status-badge" id="gmgnStatus">æŸ¥è¯¢ä¸­...</span>
                    </div>
                    <div class="platform-content">
                        <div class="info-row">
                            <span class="label">æ˜¯å¦ Honeypot:</span>
                            <span class="value" id="gmgnHoneypot">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Risk Score:</span>
                            <span class="value" id="gmgnRiskScore">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦å…è®¸å–å‡º:</span>
                            <span class="value" id="gmgnSellable">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Liquidity çŠ¶æ€:</span>
                            <span class="value" id="gmgnLiquidity">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">æœ€è¿‘äº¤æ˜“æƒ…å†µ:</span>
                            <span class="value" id="gmgnTrading">-</span>
                        </div>
                    </div>
                </div>

                <!-- Ave.ai å¡ç‰‡ -->
                <div class="platform-card" id="aveCard">
                    <div class="platform-header">
                        <h3>Ave.ai</h3>
                        <span class="status-badge" id="aveStatus">æŸ¥è¯¢ä¸­...</span>
                    </div>
                    <div class="platform-content">
                        <div class="info-row">
                            <span class="label">é£é™©ç­‰çº§:</span>
                            <span class="value" id="aveRiskLevel">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦æ ‡è®°è¯ˆéª—:</span>
                            <span class="value" id="aveScam">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦å®¡è®¡:</span>
                            <span class="value" id="aveAudited">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">å¤§æˆ·/æŒä»“é›†ä¸­åº¦:</span>
                            <span class="value" id="aveConcentration">-</span>
                        </div>
                    </div>
                </div>

                <!-- CoinMarketCap å¡ç‰‡ -->
                <div class="platform-card" id="cmcCard">
                    <div class="platform-header">
                        <h3>CoinMarketCap</h3>
                        <span class="status-badge" id="cmcStatus">æŸ¥è¯¢ä¸­...</span>
                    </div>
                    <div class="platform-content">
                        <div class="info-row">
                            <span class="label">æ˜¯å¦æ”¶å½•:</span>
                            <span class="value" id="cmcListed">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦æ˜¾ç¤ºé£é™©æ ‡ç­¾:</span>
                            <span class="value" id="cmcRiskTag">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">æµåŠ¨æ€§æ¥æº:</span>
                            <span class="value" id="cmcLiquidity">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">å¸‚å€¼å¯ä¿¡åº¦è¯„åˆ†:</span>
                            <span class="value" id="cmcCredibility">-</span>
                        </div>
                    </div>
                </div>

                <!-- Coinbase Onchain å¡ç‰‡ -->
                <div class="platform-card" id="coinbaseCard">
                    <div class="platform-header">
                        <h3>Coinbase Onchain</h3>
                        <span class="status-badge" id="coinbaseStatus">æŸ¥è¯¢ä¸­...</span>
                    </div>
                    <div class="platform-content">
                        <div class="info-row">
                            <span class="label">èµ„äº§é£é™©ç­‰çº§:</span>
                            <span class="value" id="coinbaseRiskLevel">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦æ¶‰åŠè¯ˆéª—åœ°å€:</span>
                            <span class="value" id="coinbaseScam">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">å†å²é£é™©äº¤æ˜“å æ¯”:</span>
                            <span class="value" id="coinbaseRiskTx">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">åˆè§„é»‘åå•æ¯”å¯¹:</span>
                            <span class="value" id="coinbaseBlacklist">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- é”™è¯¯æç¤º -->
        <div id="errorToast" class="toast error" style="display: none;"></div>
    </div>

    <script>
// åç«¯APIä»£ç†åœ°å€ï¼ˆéœ€è¦é…ç½®ï¼‰
const API_BASE_URL = window.location.origin + '/api' || 'http://localhost:3000/api';

// é“¾åˆ°å¹³å°é“¾æ ‡è¯†çš„æ˜ å°„
const chainMapping = {
    'ETH': { gmgn: 'eth', ave: 'ethereum', cmc: 'ethereum', coinbase: 'ethereum' },
    'BSC': { gmgn: 'bsc', ave: 'bsc', cmc: 'binance-smart-chain', coinbase: 'bsc' },
    'SOL': { gmgn: 'sol', ave: 'solana', cmc: 'solana', coinbase: 'solana' },
    'BASE': { gmgn: 'base', ave: 'base', cmc: 'base', coinbase: 'base' },
    'XLayer': { gmgn: 'xlayer', ave: 'xlayer', cmc: 'xlayer', coinbase: 'xlayer' },
    'ARB': { gmgn: 'arb', ave: 'arbitrum', cmc: 'arbitrum', coinbase: 'arbitrum' },
    'OP': { gmgn: 'op', ave: 'optimism', cmc: 'optimism', coinbase: 'optimism' },
    'POLYGON': { gmgn: 'polygon', ave: 'polygon', cmc: 'polygon', coinbase: 'polygon' }
};

// åœ°å€éªŒè¯å’Œæ ¼å¼åŒ–
function validateAndFormatAddress(address, chain) {
    if (!address || !address.trim()) {
        throw new Error('è¯·è¾“å…¥åˆçº¦åœ°å€');
    }
    address = address.trim();
    if (chain !== 'SOL') {
        if (!/^0x[a-fA-F0-9]{40}$/.test(address)) {
            throw new Error('æ— æ•ˆçš„EVMåœ°å€æ ¼å¼');
        }
        return address.toLowerCase();
    } else {
        if (address.length < 32 || address.length > 44) {
            throw new Error('æ— æ•ˆçš„Solanaåœ°å€æ ¼å¼');
        }
        return address;
    }
}

// æ˜¾ç¤ºé”™è¯¯æç¤º
function showError(message) {
    const toast = document.getElementById('errorToast');
    if (toast) {
        toast.textContent = message;
        toast.style.display = 'block';
        setTimeout(() => { toast.style.display = 'none'; }, 5000);
    }
    console.error(message);
}

// æ˜¾ç¤ºæˆåŠŸæç¤º
function showSuccess(message) {
    const toast = document.getElementById('errorToast');
    if (toast) {
        toast.textContent = message;
        toast.className = 'toast success';
        toast.style.display = 'block';
        setTimeout(() => {
            toast.style.display = 'none';
            toast.className = 'toast error';
        }, 3000);
    }
}

// æ›´æ–°å¹³å°çŠ¶æ€
function updatePlatformStatus(platformId, status, className = 'loading') {
    const statusEl = document.getElementById(`${platformId}Status`);
    if (statusEl) {
        statusEl.textContent = status;
        statusEl.className = `status-badge ${className}`;
    }
}

// æ›´æ–°GMGNå¡ç‰‡
function updateGMGNCard(data) {
    if (data.honeypot !== undefined) document.getElementById('gmgnHoneypot').textContent = data.honeypot;
    if (data.riskScore !== undefined) {
        const el = document.getElementById('gmgnRiskScore');
        el.textContent = `${data.riskScore}/100`;
        el.className = 'value';
        if (data.riskScore >= 70) el.classList.add('high-risk');
        else if (data.riskScore >= 40) el.classList.add('medium-risk');
        else el.classList.add('low-risk');
    }
    if (data.sellable !== undefined) document.getElementById('gmgnSellable').textContent = data.sellable;
    if (data.liquidity !== undefined) document.getElementById('gmgnLiquidity').textContent = data.liquidity;
    if (data.trading !== undefined) document.getElementById('gmgnTrading').textContent = data.trading;
}

// æ›´æ–°Aveå¡ç‰‡
function updateAveCard(data) {
    if (data.riskLevel !== undefined) {
        const el = document.getElementById('aveRiskLevel');
        el.textContent = data.riskLevel;
        el.className = 'value';
        if (data.riskLevel === 'D' || data.riskLevel === 'C') el.classList.add('high-risk');
        else if (data.riskLevel === 'B') el.classList.add('medium-risk');
        else el.classList.add('low-risk');
    }
    if (data.scam !== undefined) document.getElementById('aveScam').textContent = data.scam;
    if (data.audited !== undefined) document.getElementById('aveAudited').textContent = data.audited;
    if (data.concentration !== undefined) document.getElementById('aveConcentration').textContent = data.concentration;
}

// æ›´æ–°CMCå¡ç‰‡
function updateCMCCard(data) {
    if (data.listed !== undefined) document.getElementById('cmcListed').textContent = data.listed;
    if (data.riskTag !== undefined) document.getElementById('cmcRiskTag').textContent = data.riskTag;
    if (data.liquidity !== undefined) document.getElementById('cmcLiquidity').textContent = data.liquidity;
    if (data.credibility !== undefined) document.getElementById('cmcCredibility').textContent = `${data.credibility}/100`;
}

// æ›´æ–°Coinbaseå¡ç‰‡
function updateCoinbaseCard(data) {
    if (data.riskLevel !== undefined) {
        const el = document.getElementById('coinbaseRiskLevel');
        el.textContent = data.riskLevel;
        el.className = 'value';
        if (data.riskLevel === 'High') el.classList.add('high-risk');
        else if (data.riskLevel === 'Medium') el.classList.add('medium-risk');
        else el.classList.add('low-risk');
    }
    if (data.scam !== undefined) document.getElementById('coinbaseScam').textContent = data.scam;
    if (data.riskTx !== undefined) document.getElementById('coinbaseRiskTx').textContent = data.riskTx;
    if (data.blacklist !== undefined) document.getElementById('coinbaseBlacklist').textContent = data.blacklist;
}

// é€šè¿‡åç«¯APIè·å–å¹³å°æ•°æ®
async function fetchPlatformData(platform, address, chain) {
    try {
        const response = await fetch(`${API_BASE_URL}/${platform}?address=${address}&chain=${chain}`);
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
        }
        return await response.json();
    } catch (error) {
        console.error(`${platform} APIé”™è¯¯:`, error);
        return null;
    }
}

// å°è¯•ç›´æ¥æŠ“å–ï¼ˆå¯èƒ½å› CORSå¤±è´¥ï¼‰
async function tryDirectFetch(platform, address, chain) {
    const chainInfo = chainMapping[chain];
    if (!chainInfo) return null;

    const urls = {
        gmgn: `https://gmgn.ai/token/${chainInfo.gmgn}/${address}`,
        ave: `https://ave.ai/token/${chainInfo.ave}/${address}`,
        cmc: `https://coinmarketcap.com/currencies/${address}/`,
        coinbase: `https://www.coinbase.com/explorer/chains/${chainInfo.coinbase}/addresses/${address}`
    };

    try {
        // å°è¯•ä½¿ç”¨CORSä»£ç†æˆ–ç›´æ¥è®¿é—®
        const response = await fetch(urls[platform], { mode: 'no-cors' });
        // æ³¨æ„ï¼šno-corsæ¨¡å¼ä¸‹æ— æ³•è¯»å–å“åº”å†…å®¹
        return null;
    } catch (error) {
        return null;
    }
}

// è·å–GMGNæ•°æ®
async function fetchGMGNData(address, chain) {
    updatePlatformStatus('gmgn', 'æŸ¥è¯¢ä¸­...', 'loading');
    
    // å…ˆå°è¯•åç«¯API
    let data = await fetchPlatformData('gmgn', address, chain);
    
    // å¦‚æœåç«¯APIå¤±è´¥ï¼Œè¿”å›æ¨¡æ‹Ÿæ•°æ®ï¼ˆå®é™…åº”è¯¥æç¤ºéœ€è¦åç«¯ï¼‰
    if (!data) {
        updatePlatformStatus('gmgn', 'éœ€è¦åç«¯æ”¯æŒ', 'error');
        showError('GMGNæ•°æ®è·å–å¤±è´¥ï¼Œéœ€è¦é…ç½®åç«¯APIä»£ç†');
        return null;
    }
    
    updateGMGNCard(data);
    updatePlatformStatus('gmgn', 'æˆåŠŸ', 'success');
    return data;
}

// è·å–Aveæ•°æ®
async function fetchAveData(address, chain) {
    updatePlatformStatus('ave', 'æŸ¥è¯¢ä¸­...', 'loading');
    let data = await fetchPlatformData('ave', address, chain);
    if (!data) {
        updatePlatformStatus('ave', 'éœ€è¦åç«¯æ”¯æŒ', 'error');
        return null;
    }
    updateAveCard(data);
    updatePlatformStatus('ave', 'æˆåŠŸ', 'success');
    return data;
}

// è·å–CMCæ•°æ®
async function fetchCMCData(address, chain) {
    updatePlatformStatus('cmc', 'æŸ¥è¯¢ä¸­...', 'loading');
    let data = await fetchPlatformData('cmc', address, chain);
    if (!data) {
        updatePlatformStatus('cmc', 'éœ€è¦åç«¯æ”¯æŒ', 'error');
        return null;
    }
    updateCMCCard(data);
    updatePlatformStatus('cmc', 'æˆåŠŸ', 'success');
    return data;
}

// è·å–Coinbaseæ•°æ®
async function fetchCoinbaseData(address, chain) {
    updatePlatformStatus('coinbase', 'æŸ¥è¯¢ä¸­...', 'loading');
    let data = await fetchPlatformData('coinbase', address, chain);
    if (!data) {
        updatePlatformStatus('coinbase', 'éœ€è¦åç«¯æ”¯æŒ', 'error');
        return null;
    }
    updateCoinbaseCard(data);
    updatePlatformStatus('coinbase', 'æˆåŠŸ', 'success');
    return data;
}

// è®¡ç®—ç»¼åˆé£é™©è¯„ä¼°
function calculateSummary(gmgn, ave, cmc, coinbase) {
    let riskCount = 0, platformCount = 0, totalConfidence = 0;
    
    if (gmgn) {
        platformCount++;
        totalConfidence += 25;
        const riskScore = gmgn.riskScore;
        const isHoneypot = gmgn.honeypot && (gmgn.honeypot.toLowerCase() === 'yes' || gmgn.honeypot === 'æ˜¯');
        if ((riskScore !== null && riskScore >= 70) || isHoneypot) riskCount++;
    }
    if (ave) {
        platformCount++;
        totalConfidence += 25;
        const riskLevel = (ave.riskLevel || '').toUpperCase();
        const isScam = ave.scam && (ave.scam.toLowerCase() === 'yes' || ave.scam === 'æ˜¯');
        if (riskLevel === 'D' || riskLevel === 'C' || isScam) riskCount++;
    }
    if (cmc) {
        platformCount++;
        totalConfidence += 25;
        const isListed = cmc.listed && (cmc.listed.toLowerCase() === 'yes' || cmc.listed === 'æ˜¯');
        const hasRiskTag = cmc.riskTag && (cmc.riskTag.toLowerCase() === 'yes' || cmc.riskTag === 'æ˜¯');
        if (hasRiskTag || !isListed) riskCount++;
    }
    if (coinbase) {
        platformCount++;
        totalConfidence += 25;
        const riskLevel = coinbase.riskLevel ? coinbase.riskLevel.toLowerCase() : '';
        const isScam = coinbase.scam && (coinbase.scam.toLowerCase() === 'yes' || coinbase.scam === 'æ˜¯');
        if (riskLevel === 'high' || isScam) riskCount++;
    }

    if (platformCount === 0) {
        return { riskLevel: 'low', title: 'æš‚æ— æ•°æ®', description: 'æ— æ³•è·å–å¹³å°æ•°æ®ï¼Œè¯·æ£€æŸ¥åç«¯APIé…ç½®', confidence: 0 };
    }

    const riskRatio = riskCount / platformCount;
    let riskLevel, title, description, confidence;

    if (riskRatio >= 0.75) {
        riskLevel = 'high';
        title = 'High Confidence Risk';
        description = 'å¤–éƒ¨å¹³å°ä¸€è‡´æ ‡è®°ä¸ºé«˜é£é™©ï¼Œå»ºè®®é‡‡å–ç›¸åº”æªæ–½';
        confidence = Math.min(95, totalConfidence + 20);
    } else if (riskRatio >= 0.5) {
        riskLevel = 'medium';
        title = 'Medium Confidence Risk';
        description = 'åŠæ•°ä»¥ä¸Šå¹³å°æ ‡è®°é£é™©ï¼Œéœ€è¦è¿›ä¸€æ­¥å®¡æ ¸';
        confidence = Math.min(85, totalConfidence + 10);
    } else if (riskRatio >= 0.25) {
        riskLevel = 'medium';
        title = 'Medium Confidence Risk';
        description = 'éƒ¨åˆ†å¹³å°æ ‡è®°é£é™©ï¼Œå»ºè®®è°¨æ…å¤„ç†';
        confidence = Math.max(50, totalConfidence - 10);
    } else {
        riskLevel = 'low';
        title = 'Potential False Positive';
        description = 'å¤šæ•°å¹³å°æœªæ ‡è®°é£é™©ï¼Œå¯èƒ½æ˜¯è¯¯æŠ¥ï¼Œå»ºè®®é‡æ–°è¯„ä¼°';
        confidence = Math.max(40, totalConfidence - 20);
    }

    return { riskLevel, title, description, confidence: Math.round(confidence) };
}

function updateSummaryCard(summary) {
    const badge = document.getElementById('summaryRiskBadge');
    if (badge) {
        badge.textContent = summary.riskLevel === 'high' ? 'âš ï¸' : summary.riskLevel === 'medium' ? 'âš¡' : 'âœ“';
        badge.className = `risk-badge ${summary.riskLevel}`;
    }
    const titleEl = document.getElementById('summaryTitle');
    const descEl = document.getElementById('summaryDescription');
    const confValEl = document.getElementById('confidenceValue');
    const confMeterEl = document.getElementById('confidenceMeter');
    if (titleEl) titleEl.textContent = summary.title;
    if (descEl) descEl.textContent = summary.description;
    if (confValEl) confValEl.textContent = `${summary.confidence}%`;
    if (confMeterEl) confMeterEl.style.width = `${summary.confidence}%`;
}

// ä¸»æŸ¥è¯¢å‡½æ•°
async function startAnalysis() {
    const addressInput = document.getElementById('contractAddress');
    const chainSelect = document.getElementById('chainSelect');
    const searchBtn = document.getElementById('searchBtn');
    const btnText = searchBtn.querySelector('.btn-text');
    const btnLoader = searchBtn.querySelector('.btn-loader');
    
    const address = addressInput.value.trim();
    const chain = chainSelect.value;

    if (!address) {
        showError('è¯·è¾“å…¥åˆçº¦åœ°å€');
        return;
    }

    try {
        const formattedAddress = validateAndFormatAddress(address, chain);
        addressInput.value = formattedAddress;
    } catch (error) {
        showError(error.message);
        return;
    }

    // ç¦ç”¨æŒ‰é’®å¹¶æ˜¾ç¤ºåŠ è½½çŠ¶æ€
    searchBtn.disabled = true;
    btnText.style.display = 'none';
    btnLoader.style.display = 'inline';

    // æ˜¾ç¤ºç»“æœåŒºåŸŸ
    document.getElementById('summarySection').style.display = 'block';
    document.getElementById('resultsSection').style.display = 'block';

    const results = { sources: {} };

    // å¹¶è¡ŒæŸ¥è¯¢æ‰€æœ‰å¹³å°
    const queries = [
        fetchGMGNData(formattedAddress, chain).then(data => { results.sources.gmgn = data; return data; }).catch(() => { results.sources.gmgn = null; }),
        fetchAveData(formattedAddress, chain).then(data => { results.sources.ave = data; return data; }).catch(() => { results.sources.ave = null; }),
        fetchCMCData(formattedAddress, chain).then(data => { results.sources.cmc = data; return data; }).catch(() => { results.sources.cmc = null; }),
        fetchCoinbaseData(formattedAddress, chain).then(data => { results.sources.coinbase_onchain = data; return data; }).catch(() => { results.sources.coinbase_onchain = null; })
    ];

    await Promise.allSettled(queries);

    // è®¡ç®—æ±‡æ€»
    const summary = calculateSummary(
        results.sources.gmgn,
        results.sources.ave,
        results.sources.cmc,
        results.sources.coinbase_onchain
    );
    updateSummaryCard(summary);

    // æ¢å¤æŒ‰é’®çŠ¶æ€
    searchBtn.disabled = false;
    btnText.style.display = 'inline';
    btnLoader.style.display = 'none';

    if (summary.confidence > 0) {
        showSuccess('åˆ†æå®Œæˆï¼');
    } else {
        showError('æ— æ³•è·å–æ•°æ®ï¼Œè¯·æ£€æŸ¥åç«¯APIé…ç½®ã€‚æŸ¥çœ‹"åç«¯é…ç½®è¯´æ˜.md"äº†è§£å¦‚ä½•è®¾ç½®ã€‚');
    }
}

// åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
function initEventListeners() {
    const searchBtn = document.getElementById('searchBtn');
    const addressInput = document.getElementById('contractAddress');

    if (searchBtn) {
        searchBtn.addEventListener('click', function(e) {
            e.preventDefault();
            startAnalysis();
        });
    }

    if (addressInput) {
        addressInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                startAnalysis();
            }
        });
    }
}

// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initEventListeners);
} else {
    initEventListeners();
}

window.addEventListener('load', function() {
    console.log('é¡µé¢å®Œå…¨åŠ è½½å®Œæˆ');
    initEventListeners();
});
    </script>
</body>
</html>
