<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šå¹³å°é£é™©å¯¹æ¯”å·¥å…· - Token Risk Comparison</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ” å¤–éƒ¨å¤šå¹³å°é£é™©å¯¹æ¯”å·¥å…·</h1>
            <p class="subtitle">å¯¹æ¯”ä¸»æµé“¾ä¸Šå®‰å…¨å¹³å°çš„é£é™©æ ‡ç­¾ä¸è¯„åˆ†</p>
            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 15px;">
                <a href="å¿«é€Ÿå¼€å§‹.html" target="_blank" style="display: inline-block; padding: 10px 20px; background: rgba(99, 102, 241, 0.2); border: 1px solid var(--primary-color); border-radius: 8px; color: var(--primary-color); text-decoration: none; font-size: 0.9rem; transition: all 0.3s ease;">
                    ğŸ“– ä½¿ç”¨æ•™ç¨‹
                </a>
                <a href="ä¸€é”®éƒ¨ç½²-Netlify.html" target="_blank" style="display: inline-block; padding: 10px 20px; background: rgba(16, 185, 129, 0.2); border: 1px solid var(--success-color); border-radius: 8px; color: var(--success-color); text-decoration: none; font-size: 0.9rem; transition: all 0.3s ease;">
                    ğŸš€ éƒ¨ç½²åˆ°äº’è”ç½‘
                </a>
            </div>
        </header>

        <!-- è¾“å…¥åŒº -->
        <section class="input-section">
            <div class="input-group">
                <label for="contractAddress">åˆçº¦åœ°å€</label>
                <input 
                    type="text" 
                    id="contractAddress" 
                    placeholder="0x..." 
                    autocomplete="off"
                >
            </div>
            <div class="input-group">
                <label for="chainSelect">é“¾</label>
                <select id="chainSelect">
                    <option value="ETH">Ethereum (ETH)</option>
                    <option value="BSC">Binance Smart Chain (BSC)</option>
                    <option value="SOL">Solana (SOL)</option>
                    <option value="BASE">Base</option>
                    <option value="XLayer">XLayer</option>
                    <option value="ARB">Arbitrum</option>
                    <option value="OP">Optimism</option>
                    <option value="POLYGON">Polygon</option>
                </select>
            </div>
            <button id="searchBtn" class="search-btn">
                <span class="btn-text">ç”Ÿæˆé“¾æ¥</span>
            </button>
            <button id="calculateBtn" class="search-btn secondary-btn" style="display: none;">
                <span class="btn-text">è®¡ç®—æ±‡æ€»</span>
            </button>
        </section>

        <!-- æ±‡æ€»é£é™©æ‘˜è¦ -->
        <section id="summarySection" class="summary-section" style="display: none;">
            <h2>é£é™©æ±‡æ€»</h2>
            <div class="summary-card">
                <div class="summary-header">
                    <span class="risk-badge" id="summaryRiskBadge">-</span>
                    <div class="summary-info">
                        <h3 id="summaryTitle">ç»¼åˆé£é™©è¯„ä¼°</h3>
                        <p id="summaryDescription">æ­£åœ¨åˆ†æ...</p>
                    </div>
                </div>
                <div class="confidence-meter">
                    <label>å¯ä¿¡åº¦</label>
                    <div class="meter-bar">
                        <div class="meter-fill" id="confidenceMeter"></div>
                    </div>
                    <span class="confidence-value" id="confidenceValue">-</span>
                </div>
            </div>
        </section>

        <!-- å¹³å°é“¾æ¥åŒº -->
        <section id="linksSection" class="links-section" style="display: none;">
            <h2>å¹³å°è®¿é—®é“¾æ¥</h2>
            <p class="section-hint">ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è®¿é—®å„å¹³å°æŸ¥çœ‹é£é™©ä¿¡æ¯ï¼Œç„¶åæ‰‹åŠ¨å¡«å†™åˆ°ä¸‹æ–¹è¡¨å•ä¸­</p>
            <div class="links-grid">
                <a id="quickGmgnLink" href="#" target="_blank" class="quick-link-card">
                    <h3>GMGN</h3>
                    <p>æŸ¥çœ‹é£é™©è¯„åˆ†å’ŒHoneypotæ£€æµ‹</p>
                    <span class="link-arrow">â†’</span>
                </a>
                <a id="quickAveLink" href="#" target="_blank" class="quick-link-card">
                    <h3>Ave.ai</h3>
                    <p>æŸ¥çœ‹é£é™©ç­‰çº§å’Œå®¡è®¡çŠ¶æ€</p>
                    <span class="link-arrow">â†’</span>
                </a>
                <a id="quickCmcLink" href="#" target="_blank" class="quick-link-card">
                    <h3>CoinMarketCap</h3>
                    <p>æŸ¥çœ‹æ˜¯å¦æ”¶å½•å’Œé£é™©æ ‡ç­¾</p>
                    <span class="link-arrow">â†’</span>
                </a>
                <a id="quickCoinbaseLink" href="#" target="_blank" class="quick-link-card">
                    <h3>Coinbase Onchain</h3>
                    <p>æŸ¥çœ‹åˆè§„æ ‡ç­¾å’Œé£é™©æ ‡è®°</p>
                    <span class="link-arrow">â†’</span>
                </a>
            </div>
        </section>

        <!-- å¹³å°ç»“æœå¡ç‰‡ -->
        <section id="resultsSection" class="results-section" style="display: none;">
            <h2>æ‰‹åŠ¨è¾“å…¥å¯¹æ¯”ç»“æœ</h2>
            <p class="section-hint">è®¿é—®å„å¹³å°åï¼Œå°†çœ‹åˆ°çš„ä¿¡æ¯å¡«å†™åˆ°ä¸‹æ–¹è¡¨å•ä¸­</p>
            <div class="platforms-grid">
                <!-- GMGN å¡ç‰‡ -->
                <div class="platform-card" id="gmgnCard">
                    <div class="platform-header">
                        <h3>GMGN</h3>
                        <a id="gmgnLink" href="#" target="_blank" class="platform-link-btn">
                            ğŸ”— è®¿é—®å¹³å°
                        </a>
                    </div>
                    <div class="platform-content">
                        <div class="info-row">
                            <span class="label">æ˜¯å¦ Honeypot:</span>
                            <input type="text" class="value-input" id="gmgnHoneypot" placeholder="Yes/No">
                        </div>
                        <div class="info-row">
                            <span class="label">Risk Score:</span>
                            <input type="text" class="value-input" id="gmgnRiskScore" placeholder="0-100">
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦å…è®¸å–å‡º:</span>
                            <input type="text" class="value-input" id="gmgnSellable" placeholder="Yes/No">
                        </div>
                        <div class="info-row">
                            <span class="label">Liquidity çŠ¶æ€:</span>
                            <input type="text" class="value-input" id="gmgnLiquidity" placeholder="High/Medium/Low">
                        </div>
                        <div class="info-row">
                            <span class="label">æœ€è¿‘äº¤æ˜“æƒ…å†µ:</span>
                            <input type="text" class="value-input" id="gmgnTrading" placeholder="æ­£å¸¸/å¼‚å¸¸">
                        </div>
                    </div>
                </div>

                <!-- Ave.ai å¡ç‰‡ -->
                <div class="platform-card" id="aveCard">
                    <div class="platform-header">
                        <h3>Ave.ai</h3>
                        <a id="aveLink" href="#" target="_blank" class="platform-link-btn">
                            ğŸ”— è®¿é—®å¹³å°
                        </a>
                    </div>
                    <div class="platform-content">
                        <div class="info-row">
                            <span class="label">é£é™©ç­‰çº§:</span>
                            <input type="text" class="value-input" id="aveRiskLevel" placeholder="A/B/C/D">
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦æ ‡è®°è¯ˆéª—:</span>
                            <input type="text" class="value-input" id="aveScam" placeholder="Yes/No">
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦å®¡è®¡:</span>
                            <input type="text" class="value-input" id="aveAudited" placeholder="Yes/No">
                        </div>
                        <div class="info-row">
                            <span class="label">å¤§æˆ·/æŒä»“é›†ä¸­åº¦:</span>
                            <input type="text" class="value-input" id="aveConcentration" placeholder="é«˜/ä¸­/ä½">
                        </div>
                    </div>
                </div>

                <!-- CoinMarketCap å¡ç‰‡ -->
                <div class="platform-card" id="cmcCard">
                    <div class="platform-header">
                        <h3>CoinMarketCap</h3>
                        <a id="cmcLink" href="#" target="_blank" class="platform-link-btn">
                            ğŸ”— è®¿é—®å¹³å°
                        </a>
                    </div>
                    <div class="platform-content">
                        <div class="info-row">
                            <span class="label">æ˜¯å¦æ”¶å½•:</span>
                            <input type="text" class="value-input" id="cmcListed" placeholder="Yes/No">
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦æ˜¾ç¤ºé£é™©æ ‡ç­¾:</span>
                            <input type="text" class="value-input" id="cmcRiskTag" placeholder="Yes/No">
                        </div>
                        <div class="info-row">
                            <span class="label">æµåŠ¨æ€§æ¥æº:</span>
                            <input type="text" class="value-input" id="cmcLiquidity" placeholder="DEX/CEX">
                        </div>
                        <div class="info-row">
                            <span class="label">å¸‚å€¼å¯ä¿¡åº¦è¯„åˆ†:</span>
                            <input type="text" class="value-input" id="cmcCredibility" placeholder="0-100">
                        </div>
                    </div>
                </div>

                <!-- Coinbase Onchain å¡ç‰‡ -->
                <div class="platform-card" id="coinbaseCard">
                    <div class="platform-header">
                        <h3>Coinbase Onchain</h3>
                        <a id="coinbaseLink" href="#" target="_blank" class="platform-link-btn">
                            ğŸ”— è®¿é—®å¹³å°
                        </a>
                    </div>
                    <div class="platform-content">
                        <div class="info-row">
                            <span class="label">èµ„äº§é£é™©ç­‰çº§:</span>
                            <input type="text" class="value-input" id="coinbaseRiskLevel" placeholder="Low/Medium/High">
                        </div>
                        <div class="info-row">
                            <span class="label">æ˜¯å¦æ¶‰åŠè¯ˆéª—åœ°å€:</span>
                            <input type="text" class="value-input" id="coinbaseScam" placeholder="Yes/No">
                        </div>
                        <div class="info-row">
                            <span class="label">å†å²é£é™©äº¤æ˜“å æ¯”:</span>
                            <input type="text" class="value-input" id="coinbaseRiskTx" placeholder="0-100%">
                        </div>
                        <div class="info-row">
                            <span class="label">åˆè§„é»‘åå•æ¯”å¯¹:</span>
                            <input type="text" class="value-input" id="coinbaseBlacklist" placeholder="åŒ¹é…/æ— åŒ¹é…">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- é”™è¯¯æç¤º -->
        <div id="errorToast" class="toast error" style="display: none;"></div>
    </div>

    <!-- å†…è”JavaScriptï¼Œé¿å…å¤–éƒ¨æ–‡ä»¶åŠ è½½é—®é¢˜ -->
    <script>
// é“¾åˆ°å¹³å°é“¾æ ‡è¯†çš„æ˜ å°„
const chainMapping = {
    'ETH': { gmgn: 'eth', ave: 'ethereum', cmc: 'ethereum', coinbase: 'ethereum' },
    'BSC': { gmgn: 'bsc', ave: 'bsc', cmc: 'binance-smart-chain', coinbase: 'bsc' },
    'SOL': { gmgn: 'sol', ave: 'solana', cmc: 'solana', coinbase: 'solana' },
    'BASE': { gmgn: 'base', ave: 'base', cmc: 'base', coinbase: 'base' },
    'XLayer': { gmgn: 'xlayer', ave: 'xlayer', cmc: 'xlayer', coinbase: 'xlayer' },
    'ARB': { gmgn: 'arb', ave: 'arbitrum', cmc: 'arbitrum', coinbase: 'arbitrum' },
    'OP': { gmgn: 'op', ave: 'optimism', cmc: 'optimism', coinbase: 'optimism' },
    'POLYGON': { gmgn: 'polygon', ave: 'polygon', cmc: 'polygon', coinbase: 'polygon' }
};

// åœ°å€éªŒè¯å’Œæ ¼å¼åŒ–
function validateAndFormatAddress(address, chain) {
    if (!address || !address.trim()) {
        throw new Error('è¯·è¾“å…¥åˆçº¦åœ°å€');
    }
    address = address.trim();
    if (chain !== 'SOL') {
        if (!/^0x[a-fA-F0-9]{40}$/.test(address)) {
            throw new Error('æ— æ•ˆçš„EVMåœ°å€æ ¼å¼');
        }
        return address.toLowerCase();
    } else {
        if (address.length < 32 || address.length > 44) {
            throw new Error('æ— æ•ˆçš„Solanaåœ°å€æ ¼å¼');
        }
        return address;
    }
}

// æ˜¾ç¤ºé”™è¯¯æç¤º
function showError(message) {
    const toast = document.getElementById('errorToast');
    if (toast) {
        toast.textContent = message;
        toast.style.display = 'block';
        setTimeout(() => { toast.style.display = 'none'; }, 5000);
    }
}

// æ˜¾ç¤ºæˆåŠŸæç¤º
function showSuccess(message) {
    const toast = document.getElementById('errorToast');
    if (toast) {
        toast.textContent = message;
        toast.className = 'toast success';
        toast.style.display = 'block';
        setTimeout(() => {
            toast.style.display = 'none';
            toast.className = 'toast error';
        }, 3000);
    }
}

// ç”Ÿæˆå¹³å°é“¾æ¥
function generatePlatformLinks(address, chain) {
    const chainInfo = chainMapping[chain];
    if (!chainInfo) {
        throw new Error('ä¸æ”¯æŒçš„é“¾');
    }
    return {
        gmgn: `https://gmgn.ai/token/${chainInfo.gmgn}/${address}`,
        ave: `https://ave.ai/token/${chainInfo.ave}/${address}`,
        cmc: `https://coinmarketcap.com/currencies/${address}/`,
        coinbase: `https://www.coinbase.com/explorer/chains/${chainInfo.coinbase}/addresses/${address}`
    };
}

// æ›´æ–°å¹³å°é“¾æ¥
function updatePlatformLinks(address, chain) {
    try {
        const links = generatePlatformLinks(address, chain);
        const elements = {
            gmgnLink: links.gmgn,
            aveLink: links.ave,
            cmcLink: links.cmc,
            coinbaseLink: links.coinbase,
            quickGmgnLink: links.gmgn,
            quickAveLink: links.ave,
            quickCmcLink: links.cmc,
            quickCoinbaseLink: links.coinbase
        };
        for (const [id, href] of Object.entries(elements)) {
            const el = document.getElementById(id);
            if (el) el.href = href;
        }
    } catch (error) {
        console.error('ç”Ÿæˆé“¾æ¥å¤±è´¥:', error);
        throw error;
    }
}

// ç”Ÿæˆé“¾æ¥ä¸»å‡½æ•°
function generateLinks() {
    console.log('generateLinks è¢«è°ƒç”¨');
    const addressInput = document.getElementById('contractAddress');
    const chainSelect = document.getElementById('chainSelect');
    
    if (!addressInput || !chainSelect) {
        showError('é¡µé¢åŠ è½½ä¸å®Œæ•´ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
        return;
    }
    
    const address = addressInput.value.trim();
    const chain = chainSelect.value;

    if (!address) {
        showError('è¯·è¾“å…¥åˆçº¦åœ°å€');
        return;
    }

    try {
        const formattedAddress = validateAndFormatAddress(address, chain);
        addressInput.value = formattedAddress;
        updatePlatformLinks(formattedAddress, chain);
        
        const linksSection = document.getElementById('linksSection');
        const resultsSection = document.getElementById('resultsSection');
        const summarySection = document.getElementById('summarySection');
        const calculateBtn = document.getElementById('calculateBtn');

        if (linksSection) linksSection.style.display = 'block';
        if (resultsSection) resultsSection.style.display = 'block';
        if (summarySection) summarySection.style.display = 'block';
        if (calculateBtn) calculateBtn.style.display = 'inline-block';

        if (linksSection) {
            linksSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        showSuccess('é“¾æ¥å·²ç”Ÿæˆï¼Œè¯·è®¿é—®å„å¹³å°æŸ¥çœ‹ä¿¡æ¯');
    } catch (error) {
        console.error('é”™è¯¯:', error);
        showError(error.message || 'ç”Ÿæˆé“¾æ¥å¤±è´¥');
    }
}

// è¯»å–æ•°æ®å‡½æ•°
function readGMGNData() {
    const honeypot = document.getElementById('gmgnHoneypot')?.value.trim() || '';
    const riskScore = document.getElementById('gmgnRiskScore')?.value.trim() || '';
    const sellable = document.getElementById('gmgnSellable')?.value.trim() || '';
    const liquidity = document.getElementById('gmgnLiquidity')?.value.trim() || '';
    const trading = document.getElementById('gmgnTrading')?.value.trim() || '';
    if (!honeypot && !riskScore && !sellable && !liquidity && !trading) return null;
    return { honeypot: honeypot || '-', riskScore: riskScore ? parseInt(riskScore) : null, sellable: sellable || '-', liquidity: liquidity || '-', trading: trading || '-' };
}

function readAveData() {
    const riskLevel = document.getElementById('aveRiskLevel')?.value.trim() || '';
    const scam = document.getElementById('aveScam')?.value.trim() || '';
    const audited = document.getElementById('aveAudited')?.value.trim() || '';
    const concentration = document.getElementById('aveConcentration')?.value.trim() || '';
    if (!riskLevel && !scam && !audited && !concentration) return null;
    return { riskLevel: riskLevel || '-', scam: scam || '-', audited: audited || '-', concentration: concentration || '-' };
}

function readCMCData() {
    const listed = document.getElementById('cmcListed')?.value.trim() || '';
    const riskTag = document.getElementById('cmcRiskTag')?.value.trim() || '';
    const liquidity = document.getElementById('cmcLiquidity')?.value.trim() || '';
    const credibility = document.getElementById('cmcCredibility')?.value.trim() || '';
    if (!listed && !riskTag && !liquidity && !credibility) return null;
    return { listed: listed || '-', riskTag: riskTag || '-', liquidity: liquidity || '-', credibility: credibility ? parseInt(credibility) : null };
}

function readCoinbaseData() {
    const riskLevel = document.getElementById('coinbaseRiskLevel')?.value.trim() || '';
    const scam = document.getElementById('coinbaseScam')?.value.trim() || '';
    const riskTx = document.getElementById('coinbaseRiskTx')?.value.trim() || '';
    const blacklist = document.getElementById('coinbaseBlacklist')?.value.trim() || '';
    if (!riskLevel && !scam && !riskTx && !blacklist) return null;
    return { riskLevel: riskLevel || '-', scam: scam || '-', riskTx: riskTx || '-', blacklist: blacklist || '-' };
}

// è®¡ç®—æ±‡æ€»
function calculateSummary(gmgn, ave, cmc, coinbase) {
    let riskCount = 0, platformCount = 0, totalConfidence = 0;
    
    if (gmgn) {
        platformCount++;
        totalConfidence += 25;
        const riskScore = gmgn.riskScore;
        const isHoneypot = gmgn.honeypot && (gmgn.honeypot.toLowerCase() === 'yes' || gmgn.honeypot === 'æ˜¯');
        if ((riskScore !== null && riskScore >= 70) || isHoneypot) riskCount++;
    }
    if (ave) {
        platformCount++;
        totalConfidence += 25;
        const riskLevel = ave.riskLevel.toUpperCase();
        const isScam = ave.scam && (ave.scam.toLowerCase() === 'yes' || ave.scam === 'æ˜¯');
        if (riskLevel === 'D' || riskLevel === 'C' || isScam) riskCount++;
    }
    if (cmc) {
        platformCount++;
        totalConfidence += 25;
        const isListed = cmc.listed && (cmc.listed.toLowerCase() === 'yes' || cmc.listed === 'æ˜¯');
        const hasRiskTag = cmc.riskTag && (cmc.riskTag.toLowerCase() === 'yes' || cmc.riskTag === 'æ˜¯');
        if (hasRiskTag || !isListed) riskCount++;
    }
    if (coinbase) {
        platformCount++;
        totalConfidence += 25;
        const riskLevel = coinbase.riskLevel ? coinbase.riskLevel.toLowerCase() : '';
        const isScam = coinbase.scam && (coinbase.scam.toLowerCase() === 'yes' || coinbase.scam === 'æ˜¯');
        if (riskLevel === 'high' || isScam) riskCount++;
    }

    if (platformCount === 0) {
        return { riskLevel: 'low', title: 'æš‚æ— æ•°æ®', description: 'è¯·å…ˆè®¿é—®å„å¹³å°å¹¶å¡«å†™ä¿¡æ¯', confidence: 0 };
    }

    const riskRatio = riskCount / platformCount;
    let riskLevel, title, description, confidence;

    if (riskRatio >= 0.75) {
        riskLevel = 'high';
        title = 'High Confidence Risk';
        description = 'å¤–éƒ¨å¹³å°ä¸€è‡´æ ‡è®°ä¸ºé«˜é£é™©ï¼Œå»ºè®®é‡‡å–ç›¸åº”æªæ–½';
        confidence = Math.min(95, totalConfidence + 20);
    } else if (riskRatio >= 0.5) {
        riskLevel = 'medium';
        title = 'Medium Confidence Risk';
        description = 'åŠæ•°ä»¥ä¸Šå¹³å°æ ‡è®°é£é™©ï¼Œéœ€è¦è¿›ä¸€æ­¥å®¡æ ¸';
        confidence = Math.min(85, totalConfidence + 10);
    } else if (riskRatio >= 0.25) {
        riskLevel = 'medium';
        title = 'Medium Confidence Risk';
        description = 'éƒ¨åˆ†å¹³å°æ ‡è®°é£é™©ï¼Œå»ºè®®è°¨æ…å¤„ç†';
        confidence = Math.max(50, totalConfidence - 10);
    } else {
        riskLevel = 'low';
        title = 'Potential False Positive';
        description = 'å¤šæ•°å¹³å°æœªæ ‡è®°é£é™©ï¼Œå¯èƒ½æ˜¯è¯¯æŠ¥ï¼Œå»ºè®®é‡æ–°è¯„ä¼°';
        confidence = Math.max(40, totalConfidence - 20);
    }

    return { riskLevel, title, description, confidence: Math.round(confidence) };
}

function updateSummaryCard(summary) {
    const badge = document.getElementById('summaryRiskBadge');
    if (badge) {
        badge.textContent = summary.riskLevel === 'high' ? 'âš ï¸' : summary.riskLevel === 'medium' ? 'âš¡' : 'âœ“';
        badge.className = `risk-badge ${summary.riskLevel}`;
    }
    const titleEl = document.getElementById('summaryTitle');
    const descEl = document.getElementById('summaryDescription');
    const confValEl = document.getElementById('confidenceValue');
    const confMeterEl = document.getElementById('confidenceMeter');
    if (titleEl) titleEl.textContent = summary.title;
    if (descEl) descEl.textContent = summary.description;
    if (confValEl) confValEl.textContent = `${summary.confidence}%`;
    if (confMeterEl) confMeterEl.style.width = `${summary.confidence}%`;
}

function calculateSummaryFromInputs() {
    const gmgn = readGMGNData();
    const ave = readAveData();
    const cmc = readCMCData();
    const coinbase = readCoinbaseData();

    if (!gmgn && !ave && !cmc && !coinbase) {
        showError('è¯·è‡³å°‘å¡«å†™ä¸€ä¸ªå¹³å°çš„ä¿¡æ¯');
        return;
    }

    const summary = calculateSummary(gmgn, ave, cmc, coinbase);
    updateSummaryCard(summary);
    const summarySection = document.getElementById('summarySection');
    if (summarySection) {
        summarySection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
    showSuccess('æ±‡æ€»è®¡ç®—å®Œæˆ');
}

// åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
function initEventListeners() {
    console.log('åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨');
    const searchBtn = document.getElementById('searchBtn');
    const calculateBtn = document.getElementById('calculateBtn');
    const addressInput = document.getElementById('contractAddress');

    if (searchBtn) {
        searchBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('æŒ‰é’®è¢«ç‚¹å‡»');
            generateLinks();
        });
    }
    
    if (calculateBtn) {
        calculateBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            calculateSummaryFromInputs();
        });
    }

    if (addressInput) {
        addressInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                generateLinks();
            }
        });
    }
    
    // è¾“å…¥æ¡†è‡ªåŠ¨è®¡ç®—
    const inputs = document.querySelectorAll('.value-input');
    inputs.forEach(input => {
        input.addEventListener('blur', () => {
            setTimeout(() => {
                const gmgn = readGMGNData();
                const ave = readAveData();
                const cmc = readCMCData();
                const coinbase = readCoinbaseData();
                if (gmgn || ave || cmc || coinbase) {
                    calculateSummaryFromInputs();
                }
            }, 500);
        });
    });
    
    console.log('äº‹ä»¶ç»‘å®šå®Œæˆ');
}

// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initEventListeners);
} else {
    initEventListeners();
}

window.addEventListener('load', function() {
    console.log('é¡µé¢å®Œå…¨åŠ è½½å®Œæˆ');
    initEventListeners();
});
    </script>
</body>
</html>
